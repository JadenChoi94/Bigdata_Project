package com.bigdata2017.smartcar;

import java.text.DecimalFormat;
import java.util.HashSet;
import java.util.Map;
import java.util.Random;
import java.util.Iterator;

public class SmartMeterReal
{
	private  String smartmeterno;
	private  int customno; 
	private  double kw;
	private  String macaddr;
	private  Random r =  new Random();
	public SmartMeterReal(){}
	
	public SmartMeterReal(String smartmeterno, int customno, double kw, String macaddr) {
		super();
		this.smartmeterno = smartmeterno;
		this.customno = customno;
		this.kw = kw;
		this.macaddr = macaddr;
	}
	
	public String getSmartmeterno(int num)
	{		
		String[] carNumPrefix = {"A", "B" , "C" , "D" , "E" , "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"}; 
		String prefixNum = carNumPrefix[randomRange(0, 25)] ;

		DecimalFormat format = new DecimalFormat("0000");
		String carNum = format.format(num);

		return smartmeterno = prefixNum + carNum;
		
	}
	public void setSmartmeterno(String smartmeterno) {
		this.smartmeterno = smartmeterno;
	}
	
	public int randomRange(int n1, int n2) {  
		return  (int)(Math.random() * (n2 - n1 + 1)) + n1;
	} 
	
	public int getCustomno() {
		return customno;
	}
	
	public void setCustomno(int customno) {
		this.customno = customno;
	}
	
	
	public double getKw(String date ) { //가중치 추가
		Random r      = new Random();
		double famNo;
		int familyCount = 0;
		String month  = date.substring(4,5);		
		double monthnum = Integer.parseInt(month);			
//		(표준편차 * r.nextGaussian()) + 평균	
		
		int familynum  = (int)((Math.random()%100 + 1));
		
		int []arr=new int[1];
        for(int a=0; a<=1; a++){
            arr[a]=(int)(Math.random()*100+1);
        }
		
        if(famNo >=1 && famNo <= 14.59) {
        	familyCount = 1;
        }
        else if (famNo > 14.59 && famNo <= 43.05){
        	familyCount = 2;
        }
        else if (famNo > 43.05 && famNo <= 67.17){
        	familyCount = 3;
        }
        else if (famNo > 67.17 && famNo <= 92.44){
        	familyCount = 4;
        }
        else if (famNo > 92.44 && famNo <= 98.84){
        	familyCount = 5;
        }
        else if (famNo > 98.84 && famNo <= 99.74){
        	familyCount = 6;
        }
        else if (famNo > 99.74 && famNo <= 99.96){
        	familyCount = 7;
        }
        else if (famNo > 99.96 && famNo < 99.99) {
        	familyCount = 8;
        }
        else {
        	familyCount = 9;
        }
		

		
		
		
		return Math.abs( r.nextDouble()% 1.28 + 0.4 ) * ( monthnum + family_value );			
		/** 
		 * 가족수와 달 별로 가중치를 더 부가하고 싶다.
		 * */	
		
//		double family_value  = 0;
//		if(familynum == 1){
//			if(monthnum == 1){
//				family_value = ;
//			}else if(monthnum == 2){
//				family_value = ;
//			}else if(monthnum == 3){
//				family_value = ;
//			}else if(monthnum == 4){
//				family_value = ;
//			}else if(monthnum == 5){
//				family_value = ;
//			}else if(monthnum == 6){
//				family_value = ;
//			}else if(monthnum == 7){
//				family_value = ;
//			}else if(monthnum == 8){
//				family_value = ;
//			}else if(monthnum == 9){
//				family_value = ;
//			}else if(monthnum == 10){
//				family_value = ;
//			}else if(monthnum == 11){
//				family_value = ;
//			}else {
//				family_value = ;
//			}
//		}

	}

	
	
	public void setKw(double kw) {
		this.kw = kw;
	}
	public String getMacaddr() {
		return this.genMacAdd();
	}
	public void setMacaddr(String macaddr) {
		this.macaddr = macaddr;
	}
	
	public String genMacAdd(){
	    Random rand = new Random();
	    byte[] macAddr = new byte[6];
	    rand.nextBytes(macAddr);

	    macAddr[0] = (byte)(macAddr[0] & (byte)254);  

	    StringBuilder sb = new StringBuilder(18);
	    for(byte b : macAddr){
	        if(sb.length() > 0)
	            sb.append(":");
	        sb.append(String.format("%02x", b));
	    }
	   
	    return sb.toString();
	}
	

	

}
