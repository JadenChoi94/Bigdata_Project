package com.bigdata2017.smartcar;

import java.text.DecimalFormat;
import java.util.Map;
import java.util.Random;

public class SmartMeterReal
{
	private  String smartmeterno;
	private  int customno; 
	private  double kw;
	private  String macaddr;
	private  Random r =  new Random();
	public SmartMeterReal(){}
	
	public SmartMeterReal(String smartmeterno, int customno, double kw, String macaddr) {
		super();
		this.smartmeterno = smartmeterno;
		this.customno = customno;
		this.kw = kw;
		this.macaddr = macaddr;
	}
	
	public String getSmartmeterno(int num)
	{		
		String[] carNumPrefix = {"A", "B" , "C" , "D" , "E" , "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"}; 
		String prefixNum = carNumPrefix[randomRange(0, 25)] ;

		DecimalFormat format = new DecimalFormat("0000");
		String carNum = format.format(num);

		return smartmeterno = prefixNum + carNum;
		
	}
	public void setSmartmeterno(String smartmeterno) {
		this.smartmeterno = smartmeterno;
	}
	
	public int randomRange(int n1, int n2) {  
		return  (int)(Math.random() * (n2 - n1 + 1)) + n1;
	} 
	
	public int getCustomno() {
		return customno;
	}
	
	public void setCustomno(int customno) {
		this.customno = customno;
	}
	
	
	public double getKw(String date ) { //가중치 추가
		Random r = new Random();		
		String month = date.substring(4,5);
		
		double monthnum 	= Integer.parseInt(month);
//		double totaldevice  = (double)((Math.random()%20 + 2) - 4)  /10; //표준편차
		
		double familynum    = (double)((Math.random()%9 + 1));
			return getPower(familynum, monthnum);
		
//	    double familynum    = (double)(((Math.random()%9 + 1))*77.05518+353.33333) / 10;	
			
		
		// (표준편차 * r.nextGaussian()) + 평균
		
	}
	
	private double getPower(double familynum, int month){
		
		return Math.abs( r.nextDouble()% 1.28 + 0.4 ) * ( month + familynum );
		
	}
	
	
	public void setKw(double kw) {
		this.kw = kw;
	}
	public String getMacaddr() {
		return this.genMacAdd();
	}
	public void setMacaddr(String macaddr) {
		this.macaddr = macaddr;
	}
	
	public String genMacAdd(){
	    Random rand = new Random();
	    byte[] macAddr = new byte[6];
	    rand.nextBytes(macAddr);

	    macAddr[0] = (byte)(macAddr[0] & (byte)254);  

	    StringBuilder sb = new StringBuilder(18);
	    for(byte b : macAddr){
	        if(sb.length() > 0)
	            sb.append(":");
	        sb.append(String.format("%02x", b));
	    }
	   
	    return sb.toString();
	}
	

	

}
